{% extends "cosinnus_etherpad/base.html" %}
{% load i18n cosinnus_tags %}

{% block page_title %}
{% trans "Pads" %} {{ block.super }}
{% endblock page_title %}


{% block content_title %}
{{ group.name }}: {% trans "Pads" %}
{% endblock content_title %}


{% block content %}
{% if tags %}
  {% for tag in tags %}
    <a href="{% url 'cosinnus:etherpad:list-filtered' group=group.slug tag=tag.slug %}"><span class="label label-default">{{ tag.name }}</span></a>
  {% endfor %}
{% else %}
  {% trans "No tags available." %}
{% endif %}

<ul class="nav nav-pills pull-right">
{% if user.is_superuser or user|is_group_member:object %}
  <li class="active"><a href="{% url 'cosinnus:etherpad:pad-add' group=group.slug %}" class="btn"><span class="glyphicon glyphicon-plus"></span> {% trans "Add" %}</a></li>
{% endif %}
{% if user.is_superuser or user|is_group_admin:object %}
  <li class="active"><a href="{% url 'cosinnus:etherpad:export' group=group.slug %}" class="btn"><span class="glyphicon glyphicon-export"></span> {% trans "Export" context "the verb" %}</a></li>
{% endif %}
</ul>


{% if etherpad_list %}
<table class="table table-striped">
  <thead>
    <tr>
      <th><a href="{{ request.path }}{{ sort_helper.get_sort_query_by_title }}">{% trans "Title" %}</a></th>
      <th>{% trans "Tags" %}</th>
      <th>{% trans "Actions" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for object in etherpad_list %}
    <tr>
      <td>
        <a href="{% url 'cosinnus:etherpad:pad-detail' group=group.slug slug=object.slug %}">
          {{ object.title }}
        </a>
      </td>
      <td>
        {% for tag in object.tags.all %}
          <a href="{% url 'cosinnus:etherpad:list-filtered' group=group.slug tag=tag.slug %}"><span class="label label-default">{{ tag.name }}</span></a>
        {% empty %}
        -
        {% endfor %}
      </td>
      <td>
        <div class="btn-group">
          <a class="btn btn-primary btn-mini" href="{% url 'cosinnus:etherpad:pad-detail' group=group.slug slug=object.slug %}"><span class="glyphicon glyphicon-eye-open"></span> {% trans "Show" %}</a>
          {% if user.is_superuser or user|is_group_member:object %}
          <a class="btn btn-primary btn-mini dropdown-toggle" data-toggle="dropdown" href="#">
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a href="{% url 'cosinnus:etherpad:pad-edit' group=group.slug slug=object.slug %}"><span class="glyphicon glyphicon-pencil"></span> {% trans "Edit" %}</a>
            </li>
            <li>
              <a href="{% url 'cosinnus:etherpad:pad-delete' group=group.slug slug=object.slug %}"><span class="glyphicon glyphicon-trash"></span> {% trans "Delete" %}</a>
            </li>
          </ul>
          {% endif %}
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>{% trans "No Etherpads added" %}</p>
{% endif %}
{% endblock content %}
